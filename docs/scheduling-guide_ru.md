# üìÖ –®–ø–∞—Ä–≥–∞–ª–∫–∞ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è

## üéØ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ì–¥–µ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–∞—Å—Ç–æ—Ç–∞?

–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–µ–∂–∏–º–∞ —Ä–∞–±–æ—Ç—ã:

1.  **Single / Node Mode**:
    -   –ß–∞—Å—Ç–æ—Ç–∞ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç—Å—è **Systemd Timer** (–≤–Ω–µ—à–Ω–∏–π —Ç–∞–π–º–µ—Ä).
    -   –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `config.yaml` –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è —Å–ø—Ä–∞–≤–∫–∏ –∏–ª–∏ –ø–æ—Ä–æ–≥–æ–≤.

2.  **Master Mode**:
    -   –ß–∞—Å—Ç–æ—Ç–∞ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç—Å—è **–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–æ–º** (`config.yaml`).
    -   Systemd –∑–∞–ø—É—Å–∫–∞–µ—Ç —Å–µ—Ä–≤–∏—Å –∫–∞–∫ –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å (`speedtest-master.service`).

---

## üìä –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –ø–æ —Ä–µ–∂–∏–º–∞–º

### 1. Single & Node Mode (–í–Ω–µ—à–Ω–∏–π —Ç–∞–π–º–µ—Ä)

–í —ç—Ç–∏—Ö —Ä–µ–∂–∏–º–∞—Ö Python-—Å–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑, –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ç–µ—Å—Ç –∏ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è. Systemd Timer –∑–∞–ø—É—Å–∫–∞–µ—Ç –µ–≥–æ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏.

| –ò–Ω—Ç–µ—Ä–≤–∞–ª | systemd timer (`speedtest-monitor.timer`) |
|----------|-------------------------------------------|
| **15 –º–∏–Ω** | `OnCalendar=*:0/15` |
| **1 —á–∞—Å** | `OnCalendar=hourly` |
| **4 —á–∞—Å–∞** | `OnCalendar=0/4:00` |

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞:**
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å `/etc/systemd/system/speedtest-monitor.timer`:
```ini
[Timer]
OnCalendar=hourly
```

### 2. Master Mode (–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫)

–í —Ä–µ–∂–∏–º–µ Master —Å–µ—Ä–≤–∏—Å —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω–æ (`Type=simple`). –û–Ω —Å–æ–±–∏—Ä–∞–µ—Ç –æ—Ç—á–µ—Ç—ã –æ—Ç —É–∑–ª–æ–≤ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–≤–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ `config.yaml`.

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞:**
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å `config.yaml`:
```yaml
master:
  schedule:
    interval_minutes: 60      # –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å –æ—Ç—á–µ—Ç –∫–∞–∂–¥—ã–µ 60 –º–∏–Ω—É—Ç
    send_immediately: false   # –ñ–¥–∞—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ (–Ω–µ —Å–ø–∞–º–∏—Ç—å)
```

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|
| `interval_minutes` | –ö–∞–∫ —á–∞—Å—Ç–æ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ—Ç—á–µ—Ç –≤ Telegram. |
| `send_immediately` | –ï—Å–ª–∏ `true`, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ—Ç—á–µ—Ç *–∫–∞–∂–¥—ã–π —Ä–∞–∑* –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö —É–∑–ª–∞ (–º–æ–∂–µ—Ç —Å–ø–∞–º–∏—Ç—å). –ï—Å–ª–∏ `false`, –∞–≥—Ä–µ–≥–∏—Ä—É–µ—Ç –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–∞–∑ –≤ –∏–Ω—Ç–µ—Ä–≤–∞–ª. |

---

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Systemd

### Node / Single Mode
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç **Service + Timer**.

**speedtest-monitor.service**:
```ini
[Service]
Type=oneshot
ExecStart=/opt/speedtest-monitor/.venv/bin/python -m speedtest_monitor.main
```

**speedtest-monitor.timer**:
```ini
[Timer]
OnCalendar=hourly
```

### Master Mode
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç **–¢–æ–ª—å–∫–æ Service** (–î–µ–º–æ–Ω).

**speedtest-master.service**:
```ini
[Service]
Type=simple
Restart=always
ExecStart=/opt/speedtest-monitor/.venv/bin/python -m speedtest_monitor.main
```

---

## üîß Systemd Timer (Legacy / Single Mode)

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Timer —Ñ–∞–π–ª  ‚îÇ ----> ‚îÇ Service —Ñ–∞–π–ª ‚îÇ ----> ‚îÇ Python —Ç–µ—Å—Ç ‚îÇ
‚îÇ (–ö–û–ì–î–ê)     ‚îÇ       ‚îÇ (–ß–¢–û)        ‚îÇ       ‚îÇ             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# 1. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã
sudo cp systemd/*.service /etc/systemd/system/
sudo cp systemd/*.timer /etc/systemd/system/

# 2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —á–∞—Å—Ç–æ—Ç—É (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å)
sudo nano /etc/systemd/system/speedtest-monitor.timer

# 3. –í–∫–ª—é—á–∏—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å
sudo systemctl daemon-reload
sudo systemctl enable speedtest-monitor.timer
sudo systemctl start speedtest-monitor.timer
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞

```bash
# –°—Ç–∞—Ç—É—Å —Ç–∞–π–º–µ—Ä–∞
systemctl status speedtest-monitor.timer

# –ö–æ–≥–¥–∞ —Å–ª–µ–¥—É—é—â–∏–π –∑–∞–ø—É—Å–∫?
systemctl list-timers speedtest-monitor.timer

# –õ–æ–≥–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
journalctl -u speedtest-monitor.service -n 50

# –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
journalctl -u speedtest-monitor.service -f
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã

–§–∞–π–ª —Ç–∞–π–º–µ—Ä–∞ (`/etc/systemd/system/speedtest-monitor.timer`) —Å–æ–¥–µ—Ä–∂–∏—Ç –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –µ–≥–æ:

```bash
sudo nano /etc/systemd/system/speedtest-monitor.timer
```

**–í–∞—Ä–∏–∞–Ω—Ç 1: –ò–Ω—Ç–µ—Ä–≤–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**

–ó–∞–ø—É—Å–∫ –∫–∞–∂–¥—ã–µ X –º–∏–Ω—É—Ç –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ:

```ini
[Timer]
OnBootSec=1min                # –°—Ç–∞—Ä—Ç —á–µ—Ä–µ–∑ 1 –º–∏–Ω –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏
OnUnitActiveSec=10min        # –ó–∞–ø—É—Å–∫ –∫–∞–∂–¥—ã–µ 10 –º–∏–Ω—É—Ç –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
AccuracySec=1min
```

**–í–∞—Ä–∏–∞–Ω—Ç 2: –ü–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é**

–ó–∞–ø—É—Å–∫ –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –≤—Ä–µ–º—è:

```ini
[Timer]
# –ö–∞–∂–¥—ã–π —á–∞—Å –≤ :00
OnCalendar=hourly

# –ö–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç (:00 –∏ :30)
OnCalendar=*:0/30

# –ö–∞–∂–¥—ã–µ 10 –º–∏–Ω—É—Ç
OnCalendar=*:0/10

# –ï–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ –ø–æ–ª–Ω–æ—á—å
OnCalendar=*-*-* 00:00:00

# –ö–∞–∂–¥—ã–π –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ –≤ 9:00
OnCalendar=Mon *-*-* 09:00:00
```

**–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π:**

```bash
sudo systemctl daemon-reload
sudo systemctl restart speedtest-monitor.timer
systemctl list-timers speedtest-monitor.timer
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è:**

```bash
systemd-analyze calendar "hourly"
systemd-analyze calendar "*:0/10"
```

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- `man systemd.timer`
- https://www.freedesktop.org/software/systemd/man/systemd.timer.html

–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π:
```bash
sudo systemctl daemon-reload
sudo systemctl restart speedtest-monitor.timer
```

---

## ‚è∞ Cron (–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞)

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –û—Ç–∫—Ä—ã—Ç—å —Ä–µ–¥–∞–∫—Ç–æ—Ä crontab
crontab -e

# –í—Å—Ç–∞–≤–∏—Ç—å —Å—Ç—Ä–æ–∫—É (–≤—ã–±—Ä–∞—Ç—å –Ω—É–∂–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª)
```

### –ü—Ä–∏–º–µ—Ä—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤

```bash
# –ö–∞–∂–¥—ã–µ 15 –º–∏–Ω—É—Ç
*/15 * * * * cd /opt/speedtest-monitor && /opt/speedtest-monitor/.venv/bin/python -m speedtest_monitor.main >> /opt/speedtest-monitor/cron.log 2>&1

# –ö–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç
*/30 * * * * cd /opt/speedtest-monitor && /opt/speedtest-monitor/.venv/bin/python -m speedtest_monitor.main >> /opt/speedtest-monitor/cron.log 2>&1

# –ö–∞–∂–¥—ã–π —á–∞—Å (–≤ 0 –º–∏–Ω—É—Ç)
0 * * * * cd /opt/speedtest-monitor && /opt/speedtest-monitor/.venv/bin/python -m speedtest_monitor.main >> /opt/speedtest-monitor/cron.log 2>&1

# –ö–∞–∂–¥—ã–µ 2 —á–∞—Å–∞
0 */2 * * * cd /opt/speedtest-monitor && /opt/speedtest-monitor/.venv/bin/python -m speedtest_monitor.main >> /opt/speedtest-monitor/cron.log 2>&1

# –ö–∞–∂–¥—ã–µ 6 —á–∞—Å–æ–≤ (00:00, 06:00, 12:00, 18:00)
0 0,6,12,18 * * * cd /opt/speedtest-monitor && /opt/speedtest-monitor/.venv/bin/python -m speedtest_monitor.main >> /opt/speedtest-monitor/cron.log 2>&1

# –í –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –≤—Ä–µ–º—è –∫–∞–∂–¥—ã–π –¥–µ–Ω—å (09:00)
0 9 * * * cd /opt/speedtest-monitor && /opt/speedtest-monitor/.venv/bin/python -m speedtest_monitor.main >> /opt/speedtest-monitor/cron.log 2>&1
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ cron

```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ç–µ–∫—É—â–∏–µ –∑–∞–¥–∞–Ω–∏—è
crontab -l

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
tail -f /opt/speedtest-monitor/cron.log

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–∏ cron
sudo systemctl status cron  # Debian/Ubuntu
sudo systemctl status crond  # CentOS/RHEL
```

### –§–æ—Ä–º–∞—Ç cron –≤ –¥–µ—Ç–∞–ª—è—Ö

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ –º–∏–Ω—É—Ç–∞ (0 - 59)
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ —á–∞—Å (0 - 23)
‚îÇ ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ –¥–µ–Ω—å –º–µ—Å—è—Ü–∞ (1 - 31)
‚îÇ ‚îÇ ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ –º–µ—Å—è—Ü (1 - 12)
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ –¥–µ–Ω—å –Ω–µ–¥–µ–ª–∏ (0 - 7, 0 –∏ 7 = –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ)
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îÇ
* * * * * –∫–æ–º–∞–Ω–¥–∞
```

**–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã:**

| –°–∏–º–≤–æ–ª | –ó–Ω–∞—á–µ–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|--------|----------|--------|
| `*` | –ö–∞–∂–¥–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ | `* * * * *` = –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É |
| `*/N` | –ö–∞–∂–¥—ã–µ N –µ–¥–∏–Ω–∏—Ü | `*/15 * * * *` = –∫–∞–∂–¥—ã–µ 15 –º–∏–Ω—É—Ç |
| `N,M` | –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è | `0 9,12,18 * * *` = –≤ 9:00, 12:00, 18:00 |
| `N-M` | –î–∏–∞–ø–∞–∑–æ–Ω | `0 9-17 * * *` = –∫–∞–∂–¥—ã–π —á–∞—Å —Å 9:00 –¥–æ 17:00 |

---

## üÜö –°—Ä–∞–≤–Ω–µ–Ω–∏–µ: —á—Ç–æ –≤—ã–±—Ä–∞—Ç—å?

### Systemd Timer ‚úÖ

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ù–µ –∑–∞–ø—É—Å—Ç–∏—Ç –¥—É–±–ª–∏–∫–∞—Ç—ã
- ‚úÖ –í—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
- ‚úÖ –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏
- ‚úÖ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á (Persistent=true)
- ‚úÖ –õ–µ–≥–∫–æ –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å (`systemctl status`)

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- ‚ö†Ô∏è –°–ª–æ–∂–Ω–µ–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å (2 —Ñ–∞–π–ª–∞)
- ‚ö†Ô∏è –¢–æ–ª—å–∫–æ –Ω–∞ —Å–∏—Å—Ç–µ–º–∞—Ö —Å systemd

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è:**
- –°–µ—Ä–≤–µ—Ä–æ–≤ production
- –ö—Ä–∏—Ç–∏—á–Ω—ã—Ö —Å–∏—Å—Ç–µ–º
- –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–π —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–∏

### Cron ‚è∞

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ü—Ä–æ—â–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å (1 —Å—Ç—Ä–æ–∫–∞)
- ‚úÖ –£–Ω–∏–≤–µ—Ä—Å–∞–ª–µ–Ω (—Ä–∞–±–æ—Ç–∞–µ—Ç –≤–µ–∑–¥–µ)
- ‚úÖ –ó–Ω–∞–∫–æ–º –±–æ–ª—å—à–∏–Ω—Å—Ç–≤—É –∞–¥–º–∏–Ω–æ–≤

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- ‚ùå –ú–æ–∂–µ—Ç –∑–∞–ø—É—Å—Ç–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–æ–ø–∏–π –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- ‚ùå –ù—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚ùå –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –º–æ–≥—É—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å
- ‚ùå –ù–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è:**
- –ë—ã—Å—Ç—Ä–æ–≥–æ –ø—Ä–æ—Ç–æ—Ç–∏–ø–∏—Ä–æ–≤–∞–Ω–∏—è
- –ü—Ä–æ—Å—Ç—ã—Ö –∑–∞–¥–∞—á
- –°–∏—Å—Ç–µ–º –±–µ–∑ systemd

---

## üîç –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### Timer –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏–Ω—Ç–∞–∫—Å–∏—Å
sudo systemd-analyze verify /etc/systemd/system/speedtest-monitor.timer

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –æ—à–∏–±–∫–∏
journalctl -xe

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –≤–∫–ª—é—á–µ–Ω –ª–∏
systemctl is-enabled speedtest-monitor.timer

# –í–∫–ª—é—á–∏—Ç—å, –µ—Å–ª–∏ –≤—ã–∫–ª—é—á–µ–Ω
sudo systemctl enable speedtest-monitor.timer
```

### Cron –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏–Ω—Ç–∞–∫—Å–∏—Å crontab
crontab -l

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –∑–∞–ø—É—â–µ–Ω –ª–∏ cron
sudo systemctl status cron

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ —Å–∏—Å—Ç–µ–º—ã
grep CRON /var/log/syslog  # Debian/Ubuntu
grep CRON /var/log/cron    # CentOS/RHEL

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –Ω–∞ —Å–∫—Ä–∏–ø—Ç
ls -la /opt/speedtest-monitor/.venv/bin/python

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—É—Ç—å –∫ Python
which python
```

### –¢–µ—Å—Ç –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Ä—É—á–Ω—É—é –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
cd /opt/speedtest-monitor
source .venv/bin/activate
python -m speedtest_monitor.main

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
ls -la config.yaml .env

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
tail -f speedtest.log

# –î–ª—è systemd:
journalctl -u speedtest-monitor.service -n 100 --no-pager
```

---

## üí° –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### Systemd

```bash
# –ë—ã—Å—Ç—Ä–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
systemctl status speedtest-monitor.timer
systemctl status speedtest-monitor.service
systemctl list-timers

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ (–¥–ª—è —Ç–µ—Å—Ç–∞)
sudo systemctl start speedtest-monitor.service

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –∑–∞ —Å–µ–≥–æ–¥–Ω—è
journalctl -u speedtest-monitor.service --since today

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ç–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏
journalctl -u speedtest-monitor.service -p err

# –û—á–∏—Å—Ç–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –ª–æ–≥–∏ journal
sudo journalctl --vacuum-time=7d
```

### Cron

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º
crontab -l | crontab -

# –£–¥–∞–ª–∏—Ç—å –≤—Å–µ –∑–∞–¥–∞–Ω–∏—è
crontab -r

# –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–µ–π
crontab -l > crontab.backup
crontab -e

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏
crontab crontab.backup

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∑–∞–¥–∞–Ω–∏—è –¥—Ä—É–≥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (root)
sudo crontab -u username -l
```

---

## üìö –°–º. —Ç–∞–∫–∂–µ

- [–ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏](configuration_ru.md)
- [–£—Å—Ç–∞–Ω–æ–≤–∫–∞](installation_ru.md)
- [–†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ](deployment_ru.md)
- [–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫](troubleshooting.md)
